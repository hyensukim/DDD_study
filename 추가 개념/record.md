# ğŸ† record

## ğŸ‡ ë“±ì¥ë°°ê²½

Java 16ë²„ì „ì—ì„œ ì •ì‹ ìŠ¤í™ìœ¼ë¡œ ì˜¬ë¼ì˜¨ ê¸°ëŠ¥.

DTOì—ëŠ” *ë³´ì¼ëŸ¬ í”Œë ˆì´íŠ¸ ì½”ë“œë¥¼ ë¶ˆí•„ìš”í•˜ê²Œ í¬ê²Œ ì‘ì„±í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤.

- ë³´ì¼ëŸ¬ í”Œë ˆì´íŠ¸ ì½”ë“œ : ìµœì†Œí•œì˜ ë³€ê²½ìœ¼ë¡œ ì—¬ëŸ¬ ê³³ì—ì„œ ì¬ì‚¬ìš©ë˜ë©´ ë°˜ë³µì ìœ¼ë¡œ ë¹„ìŠ·í•œ í˜•íƒœë¥¼ ê°€ì§€ê³  ìˆëŠ” ì½”ë“œ ex) get/set ë©”ì„œë“œ, equals, hashCode, toString ë“±...

ì¼ë°˜ì ìœ¼ë¡œ ì´ëŸ¬í•œ ë³´ì¼ëŸ¬ í”Œë ˆì´íŠ¸ ì½”ë“œëŠ” lombok ë˜ëŠ” ì½”í‹€ë¦°ì˜ data class ë“±ì„ ì‚¬ìš©í•˜ì—¬ ì¤‘ë³µìœ¼ë¡œ ë°œìƒí•˜ëŠ” ì½”ë“œì˜ í¬ê¸°ë¥¼ ì¤„ì¼ ìˆ˜ ìˆë‹¤.

ì´ë ‡ê²Œ ë¹„ëŒ€í•´ì§„ ë³´ì¼ëŸ¬ í”Œë ˆì´íŠ¸ ì½”ë“œëŠ” ìë°”ê°€ ê°€ì§€ê³  ìˆëŠ” ë‹¨ì ìœ¼ë¡œ ì‘ìš©í•œë‹¤. í‰ì†Œ lombok ë˜ëŠ” IDEì˜ ë„ì›€ìœ¼ë¡œ ì½”ë“œë¥¼ ê°„ê²°í•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆì§€ë§Œ, ì´ëŠ” ê·¼ë³¸ì ì¸ ìë°”ê°€ ê°€ì§€ê³  ìˆëŠ” í•œê³„ë¥¼ í•´ê²°í•œ ê²ƒì´ ì•„ë‹ˆë‹¤. ì„¤ìƒê°€ìƒìœ¼ë¡œ êµ¬ê¸€ì´ kotlinì„ ê³µì‹ ì§€ì› ì–¸ì–´ë¡œ ì±„íƒí•˜ë©´ì„œ ìë°”ì˜ ì…ì§€ê°€ í¬ê²Œ í”ë“¤ë¦¬ê²Œ ë˜ì—ˆë‹¤. ìë°” ì§„ì˜ì—ì„œëŠ” ìœ„ê¸°ê°ì„ ëŠê¼ˆê³  ì´ë¥¼ ê·¹ë³µí•˜ê¸° ìœ„í•´ ì—…ê·¸ë ˆì´ë“œ í•˜ë©´ì„œ ì¶”ê°€ëœ ê¸°ëŠ¥ ì¤‘ í•˜ë‚˜ê°€ `record` ì´ë‹¤.


## ğŸ‡ ëª©í‘œ

- ê°ì²´ ì§€í–¥ì˜ ì‚¬ìƒì— ë§ê²Œ ë°ì´í„°ë¥¼ ê°„ê²°í•˜ê²Œ í‘œí˜„í•˜ê¸° ìœ„í•œ ë°©ë²•ì„ ì œê³µ
- ê°œë°œìê°€ ë™ì‘ì„ í™•ì¥í•˜ëŠ” ê²ƒë³´ë‹¤ ë¶ˆë³€ ë°ì´í„°ë¥¼ ëª¨ë¸ë§í•˜ëŠ”ë° ì§‘ì¤‘í•˜ë„ë¡ í•¨
- ë°ì´í„° ì§€í–¥ ë©”ì„œë“œë¥¼ ìë™ìœ¼ë¡œ êµ¬í˜„
- ë‹¨, java beansë¥¼ ëŒ€ì²´í•˜ê¸° ìœ„í•œ ê¸°ìˆ ì€ ì•„ë‹ˆë‹¤. ë˜í•œ, ì–´ë…¸í…Œì´ì…˜ ì§€í–¥ì ì¸ ì½”ë“œì™€ ê±°ë¦¬ê°€ ë©€ë‹¤.
- addressë¼ëŠ” ë‹¨ìˆœí•œ ì£¼ì†Œê°’ì„ ê°–ê³  ìˆëŠ” ë…€ì„ í•˜ë‚˜ ë§Œë“œëŠ”ë° ë³´ì¼ëŸ¬ í”Œë ˆì´íŠ¸ ì½”ë“œê°€ ë¹„ëŒ€í•´ì§€ëŠ” ê²°ê³¼ë¥¼ ê°€ì§€ê²Œ ëœë‹¤.


## ğŸ‡ íŠ¹ì§•

- êµ¬ì¡°

```
public record Penguin(String name, String habitat){}
```

recordì˜ êµ¬ì¡°ë¥¼ í™•ì¸í•´ë³´ë©´, calss ì„ ì–¸ ì‹œ recordë¥¼ ì‚¬ìš”í•œë‹¤. `ë ˆì½”ë“œëª…(í—¤ë”){ë°”ë””}` ì˜ êµ¬ì¡°ë¥¼ ê°€ì§€ê²Œ ëœë‹¤.

í—¤ë”ì— ë‚˜ì—´ë˜ëŠ” í•„ë“œë¥¼ `ì»´í¬ë„ŒíŠ¸` ë¼ê³  ë¶€ë¥¸ë‹¤.

ì»´íŒŒì¼ëŸ¬ëŠ” í—¤ë”ë¥¼ í†µí•´ ë‚´ë¶€ í•„ë“œë¥¼ ì¶”ë¡ í•˜ëŠ”ë° ì´ ë•Œ String íƒ€ì…ì˜ name, habitatì´ ìˆë‹¤ëŠ” ê²ƒì„ ì¸ì‹í•˜ê²Œ ëœë‹¤. ì´í›„ ì½”ë“œì— ëª…ì‹œì ìœ¼ë¡œ ì ‘ê·¼ìì™€ ìƒì„±ì, toString, equals, hashCodeë¥¼ ì„ ì–¸í•˜ì§€ ì•Šì•„ë„ ì´ì— ëŒ€í•œ êµ¬í˜„ì„ ìë™ìœ¼ë¡œ ì œê³µí•´ì¤€ë‹¤.

ë‹¨, getter ì‚¬ìš© ì‹œ getName(), getHabitat() ìœ¼ë¡œ ì“°ëŠ”ê²Œ ì•„ë‹ˆë¼ í•„ë“œëª…, ì¦‰ ì»´í¬ë„ŒíŠ¸ì˜ ì´ë¦„ë§Œ ì‚¬ìš”í•˜ë©´ ëœë‹¤. -> name(), habitat()

- íŠ¹ì§•

1. recordëŠ” ë¶ˆë³€ ê°ì²´ë¡œ abstractë¡œ ì„ ì–¸ì´ ë¶ˆê°€í•˜ë©°, ì•”ì‹œì ìœ¼ë¡œ finalë¡œ ì„ ì–¸ëœë‹¤. í•œë²ˆ ì„ ì–¸ ì‹œ setterë¡œ ê°’ ë³€ê²½ì´ ë¶ˆê°€í•˜ë©°, ìƒì†ì´ ë¶ˆê°€í•˜ë‹¤.
2. record ë‚´ ê° í•„ë“œëŠ” private finalë¡œ ì •ì˜ëœë‹¤.
3. ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ìƒì† ë°›ëŠ” ê²ƒì´ ë¶ˆê°€ëŠ¥í•˜ì§€ë§Œ, ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒì€ ê°€ëŠ¥í•˜ë‹¤.
4. ë ˆì½”ë“œ ë‚´ë¶€ì— ë©¤ë²„ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•  ìˆ˜ ì—†ë‹¤. ê·¸ëŸ¬ë‚˜ static ë³€ìˆ˜ëŠ” ìƒì„±ì´ ê°€ëŠ¥í•˜ë‹¤. ì´ëŠ” í—¤ë”ì— ì •ì˜í•œ ë³€ìˆ˜ë§Œ recordë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œì´ë‹¤.
5. ìœ„ì˜ 4ê°€ì§€ ì£¼ìš” íŠ¹ì§•ì„ ì œì™¸í•˜ê³  ìë°”ì˜ í´ë˜ìŠ¤ ê°œë…ê³¼ ë™ì¼í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
   1. new í‚¤ì›Œë“œë¥¼ í†µí•´ ê°ì²´ì™€ ê°€ëŠ¥
   2. static ë©”ì†Œë“œ, static í•„ë“œë§Œ ì„ ì–¸ ê°€ëŠ¥
   3. ì¤‘ì²© í´ë˜ìŠ¤ ì‚¬ìš© ê°€ëŠ¥ ë° ì œë„ˆë¦­ íƒ€ì…ìœ¼ë¡œ ì§€ì • ê°€ëŠ¥.

- body ì¬ì •ì˜

```
public record Penguin(String name, String habitat) {

    @Override
    public String toString() {
        return "Gundam{" +
                "override_name='" + name + '\'' +
                ", override_habitat='" + habitat + '\'' +
                '}';
    }

    public boolean isFreedom() {
	return this.name.contains("freedom");
    }
}
```

recordì˜ body ë¶€ë¶„ì€ ìë™ìœ¼ë¡œ ìƒì„±ëœ ë©”ì†Œë“œ ë˜ëŠ” ìƒˆë¡œìš´ ë©”ì†Œë“œë¥¼ ì¶”ê°€ë¡œ ì‘ì„±í•œë‹¤.


- ì»´íŒ©íŠ¸ ìƒì„±ì

ì»´íŒ©íŠ¸ ìƒì„±ìëŠ” ìƒì„±ì ë§¤ê°œ ë³€ìˆ˜ë¥¼ ë°›ëŠ” ë¶€ë¶„ì´ ì‚¬ë¼ì§„ í˜•íƒœì´ë‹¤. ê°œë°œìê°€ ëª…ì‹œì ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ í•„ë“œë¥¼ ì´ˆê¸°í™” í•˜ì§€ ì•Šì•„ë„ ì»´íŒ©íŠ¸ ìƒì„±ìì˜ ë§ˆì§€ë§‰ ë¶€ë¶„ì— ì´ˆê¸°í™” êµ¬ë¬¸ì´ ìë™ìœ¼ë¡œ ì‚½ì…ëœë‹¤. í‘œì¤€ ìƒì„±ìì™€ ë‹¬ë¦¬ ì»´íŒ©íŠ¸ ìƒì„±ì ë‚´ë¶€ì—ì„œëŠ” ì¸ìŠ¤í„´ìŠ¤ í•„ë“œì— ì ‘ê·¼ì´ ë¶ˆê°€í•˜ë‹¤.

ì´ëŸ¬í•œ ì´ìœ ë¡œ ì»´íŒ©íŠ¸ ìƒì„œìì—ëŠ” ì»´í¬ë„ŒíŠ¸ë¡œ ë“¤ì–´ì˜¨ ê°’ì„ ë¶ˆë³€ìœ¼ë¡œ ë§Œë“¤ê±°ë‚˜ ë¶ˆë³€ì‹ì´ ë§Œì¡±í•˜ëŠ”ì§€ ìœ íš¨ì„± ì²´í¬ ë“±ì˜ ì‘ì—…ì„ í•˜ê¸°ì— ì í•©í•˜ë‹¤.

ì»´íŒ©íŠ¸ ìƒì„±ìì˜ ì„ ì–¸ ì˜ë„ëŠ” ìƒì„±ì ë³¸ë¬´ì— ê²€ì¦ ë° ì •ê·œí˜¸ìš© ì½”ë“œë§Œ ë„£ì–´ì•¼ í•œë‹¤ëŠ” ê²ƒìœ¼ë¡œ ë‚˜ë¨¸ì§€ ì´ˆê¸°í™” ì½”ë“œëŠ” ì»´íŒŒì¼ëŸ¬ê°€ ìë™ìœ¼ë¡œ ìˆ˜í–‰í•´ ê°œë°œìëŠ” ê²€ì¦ì—ë§Œ ì§‘ì¤‘ì´ ê°€ëŠ¥í•˜ë‹¤.

```
public record Penguin(String name, String habitat){
	public Penguin{
		Objects.requreNonNull(name);
		Objects.requreNonNull(habitat);
	}
}
```

ì»´íŒ©íŠ¸ ìƒì„±ìì˜ ì‚¬ìš©ì€ ì¼ë°˜ ìƒì„±ìì™€ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

`Penguin penguin = new Penguin("ë½€ë¡œë¡œ","ë‚¨ê·¹");`

ì´ì²˜ëŸ¼ recordëŠ” ì§ê´€ì ì´ê³ , êµ¬ì¡°ë¥¼ ë‹¨ìˆœí™”ê²Œ í•´ì¤€ë‹¤.


# ğŸ† recordë¥¼ entityë¡œ? -> No! DTOë¡œ!

recordëŠ” entityë¡œ ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤. 

- hibernateì™€ ê°™ì€ jpaëŠ” í”„ë¡ì‹œ ìƒì„±ì„ ìœ„í•´ ì¸ìˆ˜ ìƒì„±ì, non-final í•„ë“œ, setter ë° non-final í´ë˜ìŠ¤ê°€ ì—†ëŠ” ì—”í‹°í‹°ì— ì˜ì¡´í•œë‹¤. ì¦‰, í”„ë¡ì‹œë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ì„œ entityëŠ” ë¶ˆë³€ì´ë©´ ì•ˆëœë‹¤.
- ì¿¼ë¦¬ ê²°ê³¼ë¥¼ ë§¤í•‘ ì‹œ ê°ì²´ë¥¼ ì¸ìŠ¤í„´ìŠ¤í™” í•  ìˆ˜ ìˆë„ë¡ ë§¤ê°œë³€ìˆ˜ê°€ ì—†ëŠ” ìƒì„±ìê°€ í•„ìš”í•˜ë‹¤. í•˜ì§€ë§Œ, recordëŠ” ë§¤ê°œë³€ìˆ˜ê°€ ì—†ëŠ” ìƒì„±ì(ê¸°ë³¸ ìƒì„±ì)ë¥¼ ì œê³µí•˜ì§€ ì•ŠëŠ”ë‹¤.
- ì ‘ê·¼ì ë©”ì†Œë“œì¸ getterê°€ í•„ìˆ˜ ëª…ëª… ê·œì¹™ì„ ë”°ë¥´ì§€ ì•ŠëŠ”ë‹¤. recordì˜ getterëŠ” í•„ë“œëª…ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•œë‹¤. ë”°ë¼ì„œ ì¿¼ë¦¬ ê²°ê³¼ ì²˜ë¦¬ í›„ ìˆ˜í–‰í•  getter, setterì— ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.

# Ref.

> [[Java]ìë°” recordë¥¼ entityë¡œ?](https://velog.io/@power0080/java%EC%9E%90%EB%B0%94-record%EB%A5%BC-entity%EB%A1%9C)
